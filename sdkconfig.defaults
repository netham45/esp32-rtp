# The mDNS component is now added as a dependency in idf_component.yml

# Partition Table Configuration
CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME="partitions.csv"

# USB-C Power Management Configuration
CONFIG_I2C_MASTER_SCL_IO=9
CONFIG_I2C_MASTER_SDA_IO=8
CONFIG_OTG_PIN=13
CONFIG_I2C_MASTER_FREQ_HZ=100000
CONFIG_POWER_CHIP_ADDR=0x6B
CONFIG_ENABLE_OTG_BOOST_MODE=y
CONFIG_BOOST_VOLTAGE_VALUE=0x93
CONFIG_BOOST_FREQUENCY_VALUE=0x38

# ----------------------------
# ESP32-RTP project defaults
# ----------------------------

# Core Audio
CONFIG_PCM_CHUNK_SIZE=1152
CONFIG_SAMPLE_RATE=48000
CONFIG_BIT_DEPTH=16
CONFIG_DEFAULT_VOLUME_PCT=100

# Networking (RTP/SAP)
CONFIG_RTP_PORT=4010
CONFIG_SAP_PORT=9875
CONFIG_SAP_MULTICAST_ADDR="224.2.127.254"
CONFIG_SAP_PULSEAUDIO_ADDR="224.0.0.56"
CONFIG_SAP_MAX_ANNOUNCEMENTS=10
CONFIG_SAP_ANNOUNCEMENT_TIMEOUT_SEC=120
CONFIG_SAP_CLEANUP_INTERVAL_SEC=30
CONFIG_SAP_BUFFER_SIZE=1024

# Power: BQ25895
CONFIG_BQ25895_I2C_ADDR=0x6A
CONFIG_BQ25895_I2C_PORT=0
CONFIG_BQ25895_SDA_GPIO=8
CONFIG_BQ25895_SCL_GPIO=9
CONFIG_BQ25895_I2C_FREQ_HZ=100000
CONFIG_BQ25895_OTG_GPIO=13
CONFIG_BQ25895_DEFAULT_BOOST_MV=5000

# Feature Gates
CONFIG_FEATURE_USB=y
CONFIG_FEATURE_SPDIF=y

# USB Out
CONFIG_USB_HOST_TASK_PRIO=5
CONFIG_USB_HOST_TASK_STACK=4096
CONFIG_UAC_TASK_PRIO=5
CONFIG_UAC_TASK_STACK=4096
CONFIG_USB_ENUMERATION_TIMEOUT_MS=5000
CONFIG_USB_TRANSFER_RETRY_COUNT=3
CONFIG_USB_TRANSFER_RETRY_DELAY_MS=100
CONFIG_USB_RECONNECT_DELAY_MS=2000
CONFIG_USB_RECONNECT_MAX_ATTEMPTS=5
CONFIG_USB_INIT_MAX_RETRIES=3

# SPDIF In
CONFIG_SPDIF_IN_RMT_RESOLUTION_HZ=80000000
CONFIG_SPDIF_IN_RMT_MEM_BLOCK_SYMBOLS=8192
CONFIG_SPDIF_IN_SYMBOL_BUFFER_SIZE=8192
CONFIG_SPDIF_IN_PCM_BUFFER_SIZE=4096
CONFIG_SPDIF_IN_DECODER_TASK_STACK=4096
CONFIG_SPDIF_IN_DECODER_TASK_PRIORITY=10
CONFIG_SPDIF_IN_HISTOGRAM_BIN_COUNT=256
CONFIG_SPDIF_IN_MAX_PULSE_WIDTH_NS=2000
CONFIG_SPDIF_IN_MIN_SAMPLES_FOR_ANALYSIS=10000
CONFIG_SPDIF_IN_PULSE_RATIO_TOLERANCE_MILLIPCT=150
CONFIG_SPDIF_IN_EXPECTED_SHORT_PULSE_PCT_TENTHS=600
CONFIG_SPDIF_IN_EXPECTED_MEDIUM_PULSE_PCT_TENTHS=350
CONFIG_SPDIF_IN_EXPECTED_LONG_PULSE_PCT_TENTHS=50
CONFIG_SPDIF_IN_DISTRIBUTION_TOLERANCE_PCT=100

# mDNS Discovery
CONFIG_MDNS_QUERY_TIMEOUT_MS=3000
CONFIG_MDNS_MAX_RESULTS=10
CONFIG_MDNS_MAX_DEVICES=16

# NTP / DNS
CONFIG_DNS_MDNS_PORT=5353
CONFIG_DNS_MDNS_IPV4_ADDRESS="224.0.0.251"
CONFIG_NTP_SERVER_PORT=123
CONFIG_NTP_QUERY_TARGET="screamrouter.local"
CONFIG_NTP_HISTORY_SIZE=25
CONFIG_NTP_POLL_INTERVAL_MS=500
CONFIG_NTP_FAST_POLL_INTERVAL_MS=50
CONFIG_NTP_MAX_FAILURE_COUNT=3

# WiFi
CONFIG_WIFI_AP_CHANNEL=1
CONFIG_WIFI_AP_MAX_CONNECTIONS=4
CONFIG_WIFI_CONNECTION_TIMEOUT_MS=10000

# Visualizer (fixed-point where needed)
CONFIG_VIZ_CHUNK_SIZE=1152
CONFIG_VIZ_RING_SIZE=4608
CONFIG_VIZ_WINDOW_SIZE=1024
CONFIG_VIZ_ATTACK_COEFF_MPCT=200
CONFIG_VIZ_RELEASE_COEFF_MPCT=30
CONFIG_VIZ_PEAK_HOLD_MS=1500
CONFIG_VIZ_PPM_MIN_DB_TENTHS=-400
CONFIG_VIZ_PPM_MAX_DB_TENTHS=0
CONFIG_VIZ_PPM_DB_RANGE_TENTHS=400
CONFIG_VIZ_PPM_OVERLOAD_DB_TENTHS=-30
CONFIG_VIZ_PPM_DECAY_DB_PER_SEC_TENTHS=250
CONFIG_VIZ_SMOOTH_COEFF_MPCT=300
CONFIG_VIZ_AUTO_GAIN_MIN_MPCT=500
CONFIG_VIZ_AUTO_GAIN_MAX_MPCT=4000
CONFIG_VIZ_AUTO_GAIN_TARGET_MPCT=800
CONFIG_VIZ_AUTO_GAIN_ADJUST_RATE_MPCT=50
CONFIG_VIZ_AUTO_GAIN_WINDOW_MS=1000
